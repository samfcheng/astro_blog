---
import '../../styles/blog.scss';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.id },
		props: post,
	}));
}

const post = Astro.props;
const { Content } = await render(post);

const data = post.data
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="./favicon.ico" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>{data.title}</title>
	</head>
	<body>
    <header class="blog-header">
      <a href="../../" class="back">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left-icon lucide-chevron-left"><path d="m15 18-6-6 6-6"/></svg>
      </a>
      <img src={`../.${data.heroImage}`}/>
      <div class="header-content">
        <h1 class="blog-title">{data.title}</h1>
        <p class="pub-date">Published {data.pubDate}</p>
      </div>
    </header>
    <main class="blog-main">
      <Content />
    </main>
  </body>
</html>
